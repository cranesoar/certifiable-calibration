%
% Copyright © 2012, The Massachusetts Institute of Technology. All rights reserved. 
%
% THE LICENSOR EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES CONCERNING THIS 
% SOFIWARE AND DOCUMENTATION, INCLUDING ANY WARRANTIES OF MERCHANTABILITY, 
% FITNESS FOR ANY PARTICULAR PURPOSE, NON- INFRINGEMENT AND WARRANTIES OF 
% PERFORMANCE, AND ANY WARRANTY THAT MIGHT OTHERWISE ARISE FROM COURSE OF 
% DEALING OR USAGE OF TRADE. NO WARRANTY IS EITHER EXPRESS OR IMPLIED WITH 
% RESPECT TO THE USE OF THE SOFIWARE OR DOCUMENTATION. Under no circumstances 
% shall the Licensor be liable for incidental, special, indirect, direct or 
% consequential damages, or loss of profits, interruption of business, or 
% related expenses which may arise from use of Software or Documentation, 
% including but not limited to those resulting from defects in Software 
% and/or Documentation, or loss or inaccuracy of data of any kind. 
%
% This software is licensed under the "LIMITED RESEARCH LICENSE (SOURCE
% CODE)" as described in the included LICENSE.txt
%
% Please cite the paper below if you are using this software in your work:
% Brookshire, J.; Teller, S. Extrinsic Calibration from Per-Sensor Egomotion. 
%   Robotics: Science and Systems, 2012.
%
function y=JgFIMsubmat1_withoff(r2Rr10,r2Rr11,r2Rr12,r2Rr13,r2Rr14,r2Rr15,r2Rr16,r2Rr17,s0,s1,s2,s3,s4,s5,s6,s7,a0,a1,a2,a3,a4,a5,a6,a7)
y=[a0,(-2).*(a3.*s0.*s2+a2.*s1.*s2+(-1).*a2.*s0.*s3+a3.*s1.*s3)+a1.*((-1)...
.*s0.^2+(-1).*s1.^2+s2.^2+s3.^2),(-2).*((-1).*a3.*s0.*s1+a1.*s1.*s2+a1.*...
s0.*s3+a3.*s2.*s3)+a2.*((-1).*s0.^2+s1.^2+(-1).*s2.^2+s3.^2),(-2).*(a2.*...
s0.*s1+(-1).*a1.*s0.*s2+a1.*s1.*s3+a2.*s2.*s3)+a3.*((-1).*...
s0.^2+s1.^2+s2.^2+(-1).*s3.^2),0,0,0,0;a1,2.*(a2.*s0.*s2+(-1).*a3.*s1.*...
s2+a3.*s0.*s3+a2.*s1.*s3)+a0.*(s0.^2+s1.^2+(-1).*s2.^2+(-1).*s3.^2),2.*(...
(-1).*a2.*s0.*s1+a0.*s1.*s2+a0.*s0.*s3+a2.*s2.*s3)+a3.*((-1).*...
s0.^2+s1.^2+(-1).*s2.^2+s3.^2),(-2).*(a3.*s0.*s1+a0.*s0.*s2+(-1).*a0.*...
s1.*s3+a3.*s2.*s3)+a2.*(s0.^2+(-1).*s1.^2+(-1).*s2.^2+s3.^2),0,0,0,0;a2,...
(-2).*(a1.*s0.*s2+(-1).*a0.*s1.*s2+a0.*s0.*s3+a1.*s1.*s3)+a3.*(...
s0.^2+s1.^2+(-1).*s2.^2+(-1).*s3.^2),2.*(a1.*s0.*s1+a3.*s1.*s2+a3.*s0.*...
s3+(-1).*a1.*s2.*s3)+a0.*(s0.^2+(-1).*s1.^2+s2.^2+(-1).*s3.^2),2.*(a0.*...
s0.*s1+(-1).*a3.*s0.*s2+a3.*s1.*s3+a0.*s2.*s3)+a1.*((-1).*...
s0.^2+s1.^2+s2.^2+(-1).*s3.^2),0,0,0,0;a3,2.*(a0.*s0.*s2+a1.*s1.*s2+(-1)...
.*a1.*s0.*s3+a0.*s1.*s3)+a2.*((-1).*s0.^2+(-1).*s1.^2+s2.^2+s3.^2),(-2)...
.*(a0.*s0.*s1+a2.*s1.*s2+a2.*s0.*s3+(-1).*a0.*s2.*s3)+a1.*(s0.^2+(-1).*...
s1.^2+s2.^2+(-1).*s3.^2),2.*(a1.*s0.*s1+a2.*s0.*s2+(-1).*a2.*s1.*s3+a1.*...
s2.*s3)+a0.*(s0.^2+(-1).*s1.^2+(-1).*s2.^2+s3.^2),0,0,0,0;a4,a5.*((-1).*...
s0.^2+(-1).*s1.^2+s2.^2+s3.^2)+(-2).*(a7.*s0.*s2+a6.*s1.*s2+(-1).*a6.*...
s0.*s3+a7.*s1.*s3+a1.*s0.*s4+a3.*s2.*s4+(-1).*a2.*s3.*s4+a1.*s1.*s5+a2.*...
s2.*s5+a3.*s3.*s5+a3.*s0.*s6+a2.*s1.*s6+(-1).*a1.*s2.*s6+(-1).*a2.*s0.*...
s7+a3.*s1.*s7+(-1).*a1.*s3.*s7),a6.*((-1).*s0.^2+s1.^2+(-1).*...
s2.^2+s3.^2)+(-2).*((-1).*a7.*s0.*s1+a5.*s1.*s2+a5.*s0.*s3+a7.*s2.*...
s3+a2.*s0.*s4+(-1).*a3.*s1.*s4+a1.*s3.*s4+(-1).*a3.*s0.*s5+(-1).*a2.*...
s1.*s5+a1.*s2.*s5+a1.*s1.*s6+a2.*s2.*s6+a3.*s3.*s6+a1.*s0.*s7+a3.*s2.*...
s7+(-1).*a2.*s3.*s7),a7.*((-1).*s0.^2+s1.^2+s2.^2+(-1).*s3.^2)+(-2).*(...
a6.*s0.*s1+(-1).*a5.*s0.*s2+a5.*s1.*s3+a6.*s2.*s3+a3.*s0.*s4+a2.*s1.*...
s4+(-1).*a1.*s2.*s4+a2.*s0.*s5+(-1).*a3.*s1.*s5+a1.*s3.*s5+(-1).*a1.*...
s0.*s6+(-1).*a3.*s2.*s6+a2.*s3.*s6+a1.*s1.*s7+a2.*s2.*s7+a3.*s3.*s7),a0,...
(-2).*(a3.*s0.*s2+a2.*s1.*s2+(-1).*a2.*s0.*s3+a3.*s1.*s3)+a1.*((-1).*...
s0.^2+(-1).*s1.^2+s2.^2+s3.^2),(-2).*((-1).*a3.*s0.*s1+a1.*s1.*s2+a1.*...
s0.*s3+a3.*s2.*s3)+a2.*((-1).*s0.^2+s1.^2+(-1).*s2.^2+s3.^2),(-2).*(a2.*...
s0.*s1+(-1).*a1.*s0.*s2+a1.*s1.*s3+a2.*s2.*s3)+a3.*((-1).*...
s0.^2+s1.^2+s2.^2+(-1).*s3.^2);a5,a4.*(s0.^2+s1.^2+(-1).*s2.^2+(-1).*...
s3.^2)+2.*(a6.*s0.*s2+(-1).*a7.*s1.*s2+a7.*s0.*s3+a6.*s1.*s3+a0.*s0.*...
s4+a2.*s2.*s4+a3.*s3.*s4+a0.*s1.*s5+(-1).*a3.*s2.*s5+a2.*s3.*s5+a2.*s0.*...
s6+(-1).*a3.*s1.*s6+(-1).*a0.*s2.*s6+a3.*s0.*s7+a2.*s1.*s7+(-1).*a0.*...
s3.*s7),a7.*((-1).*s0.^2+s1.^2+(-1).*s2.^2+s3.^2)+2.*((-1).*a6.*s0.*...
s1+a4.*s1.*s2+a4.*s0.*s3+a6.*s2.*s3+(-1).*a3.*s0.*s4+(-1).*a2.*s1.*...
s4+a0.*s3.*s4+(-1).*a2.*s0.*s5+a3.*s1.*s5+a0.*s2.*s5+a0.*s1.*s6+(-1).*...
a3.*s2.*s6+a2.*s3.*s6+a0.*s0.*s7+a2.*s2.*s7+a3.*s3.*s7),a6.*(s0.^2+(-1)...
.*s1.^2+(-1).*s2.^2+s3.^2)+(-2).*(a7.*s0.*s1+a4.*s0.*s2+(-1).*a4.*s1.*...
s3+a7.*s2.*s3+(-1).*a2.*s0.*s4+a3.*s1.*s4+a0.*s2.*s4+a3.*s0.*s5+a2.*s1.*...
s5+(-1).*a0.*s3.*s5+a0.*s0.*s6+a2.*s2.*s6+a3.*s3.*s6+(-1).*a0.*s1.*...
s7+a3.*s2.*s7+(-1).*a2.*s3.*s7),a1,2.*(a2.*s0.*s2+(-1).*a3.*s1.*s2+a3.*...
s0.*s3+a2.*s1.*s3)+a0.*(s0.^2+s1.^2+(-1).*s2.^2+(-1).*s3.^2),2.*((-1).*...
a2.*s0.*s1+a0.*s1.*s2+a0.*s0.*s3+a2.*s2.*s3)+a3.*((-1).*s0.^2+s1.^2+(-1)...
.*s2.^2+s3.^2),(-2).*(a3.*s0.*s1+a0.*s0.*s2+(-1).*a0.*s1.*s3+a3.*s2.*...
s3)+a2.*(s0.^2+(-1).*s1.^2+(-1).*s2.^2+s3.^2);a6,a7.*(s0.^2+s1.^2+(-1).*...
s2.^2+(-1).*s3.^2)+(-2).*(a5.*s0.*s2+(-1).*a4.*s1.*s2+a4.*s0.*s3+a5.*...
s1.*s3+(-1).*a3.*s0.*s4+a1.*s2.*s4+a0.*s3.*s4+(-1).*a3.*s1.*s5+(-1).*...
a0.*s2.*s5+a1.*s3.*s5+a1.*s0.*s6+(-1).*a0.*s1.*s6+a3.*s2.*s6+a0.*s0.*...
s7+a1.*s1.*s7+a3.*s3.*s7),a4.*(s0.^2+(-1).*s1.^2+s2.^2+(-1).*s3.^2)+2.*(...
a5.*s0.*s1+a7.*s1.*s2+a7.*s0.*s3+(-1).*a5.*s2.*s3+a0.*s0.*s4+a1.*s1.*...
s4+a3.*s3.*s4+a1.*s0.*s5+(-1).*a0.*s1.*s5+a3.*s2.*s5+a3.*s1.*s6+a0.*s2.*...
s6+(-1).*a1.*s3.*s6+a3.*s0.*s7+(-1).*a1.*s2.*s7+(-1).*a0.*s3.*s7),a5.*(...
(-1).*s0.^2+s1.^2+s2.^2+(-1).*s3.^2)+2.*(a4.*s0.*s1+(-1).*a7.*s0.*...
s2+a7.*s1.*s3+a4.*s2.*s3+(-1).*a1.*s0.*s4+a0.*s1.*s4+(-1).*a3.*s2.*...
s4+a0.*s0.*s5+a1.*s1.*s5+a3.*s3.*s5+(-1).*a3.*s0.*s6+a1.*s2.*s6+a0.*s3.*...
s6+a3.*s1.*s7+a0.*s2.*s7+(-1).*a1.*s3.*s7),a2,(-2).*(a1.*s0.*s2+(-1).*...
a0.*s1.*s2+a0.*s0.*s3+a1.*s1.*s3)+a3.*(s0.^2+s1.^2+(-1).*s2.^2+(-1).*...
s3.^2),2.*(a1.*s0.*s1+a3.*s1.*s2+a3.*s0.*s3+(-1).*a1.*s2.*s3)+a0.*(...
s0.^2+(-1).*s1.^2+s2.^2+(-1).*s3.^2),2.*(a0.*s0.*s1+(-1).*a3.*s0.*...
s2+a3.*s1.*s3+a0.*s2.*s3)+a1.*((-1).*s0.^2+s1.^2+s2.^2+(-1).*s3.^2);a7,...
a6.*((-1).*s0.^2+(-1).*s1.^2+s2.^2+s3.^2)+2.*(a4.*s0.*s2+a5.*s1.*s2+(-1)...
.*a5.*s0.*s3+a4.*s1.*s3+(-1).*a2.*s0.*s4+a0.*s2.*s4+(-1).*a1.*s3.*...
s4+(-1).*a2.*s1.*s5+a1.*s2.*s5+a0.*s3.*s5+a0.*s0.*s6+a1.*s1.*s6+a2.*s2.*...
s6+(-1).*a1.*s0.*s7+a0.*s1.*s7+a2.*s3.*s7),a5.*(s0.^2+(-1).*...
s1.^2+s2.^2+(-1).*s3.^2)+(-2).*(a4.*s0.*s1+a6.*s1.*s2+a6.*s0.*s3+(-1).*...
a4.*s2.*s3+(-1).*a1.*s0.*s4+a0.*s1.*s4+a2.*s3.*s4+a0.*s0.*s5+a1.*s1.*...
s5+a2.*s2.*s5+a2.*s1.*s6+(-1).*a1.*s2.*s6+(-1).*a0.*s3.*s6+a2.*s0.*...
s7+(-1).*a0.*s2.*s7+a1.*s3.*s7),a4.*(s0.^2+(-1).*s1.^2+(-1).*...
s2.^2+s3.^2)+2.*(a5.*s0.*s1+a6.*s0.*s2+(-1).*a6.*s1.*s3+a5.*s2.*s3+a0.*...
s0.*s4+a1.*s1.*s4+a2.*s2.*s4+a1.*s0.*s5+(-1).*a0.*s1.*s5+(-1).*a2.*s3.*...
s5+a2.*s0.*s6+(-1).*a0.*s2.*s6+a1.*s3.*s6+(-1).*a2.*s1.*s7+a1.*s2.*...
s7+a0.*s3.*s7),a3,2.*(a0.*s0.*s2+a1.*s1.*s2+(-1).*a1.*s0.*s3+a0.*s1.*...
s3)+a2.*((-1).*s0.^2+(-1).*s1.^2+s2.^2+s3.^2),(-2).*(a0.*s0.*s1+a2.*s1.*...
s2+a2.*s0.*s3+(-1).*a0.*s2.*s3)+a1.*(s0.^2+(-1).*s1.^2+s2.^2+(-1).*...
s3.^2),2.*(a1.*s0.*s1+a2.*s0.*s2+(-1).*a2.*s1.*s3+a1.*s2.*s3)+a0.*(...
s0.^2+(-1).*s1.^2+(-1).*s2.^2+s3.^2)];
